<html>

<head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">
    <link rel="stylesheet" type="text/css" href="icarus.css" />
    <link rel="stylesheet" type="text/css" href="common.css" />
    <link rel="stylesheet" type="text/css" href="jquery.css" />
    <link rel="stylesheet" type="text/css" href="bootstrap/bootstrap.css" />
</head>



<!--[if lt IE 9]>
<div class="ie_warning">
    Your browser is not supported, please use Internet Explorer 9, Firefox, Safari or Google Chrome (recommended).
</div>
<![endif]-->
<div class="top-panel">
    <table class="layout-table">
        <tr>
            <td class="layout-table-td" style="vertical-align: middle;">
                <div class="btn btn-inverse" id="to_main_menu_button">
                    <a href="../icarus.html">Main menu</a>
                </div>
                <div class="page_title">
                    <h1>
                        Icarus
                    </h1>
                    <p class="page_subtitle">
                        <b><a href="http://quast.sf.net" class='dark_bg_link'>QUAST</a> Contig Browser</b>
                    </p>
                </div>
            </td>
            <td class="layout-table-td">
                <div id='controls_panel'>
                    <table class="controls_table">
                        <tr>
                        </tr>
                    </table>
                    {.section size_viewer}
                    <span style="white-space: nowrap;">
                        <div class="text_div" style="clear: left" id="contig_threshold_div">
                            Fade contigs shorter than <input class="textBox" id="input_contig_threshold" type="text"
                                size="5" /> bp
                        </div>
                    </span>
                    {.or}
                    <span id="misassemblies_selector_panel">
                        <div class="text_div" id="misassemblies_checkboxes_div">
                            Show misassemblies:
                            {.repeated section misassemblies_checkboxes}
                            <label><input type="checkbox" id="{ms_type}" name="misassemblies_select"
                                    checked="checked" />{ms_name} ({ms_count})</label>
                            {.end}
                        </div>
                    </span>
                    {.end}
                </div>
            </td>
        </tr>
    </table>
</div>





<!-- Контейнер для визуализации хромосом -->
<div id="chart"></div>





<div id="stats_panel" class="info_box" style="font-size: 12px; line-height: 1.4; text-align: left;">

    <!-- Assembly statistics -->
    <div class="collapsible-section">
        <div class="collapsible-header" onclick="toggleSection(this)"><b>Assembly statistics</b></div>
        <div class="collapsible-content">
            <b>Assembly:</b> HG002.1<br />
            <b>Total length:</b> 2,958,633,312 bp<br />
            <b># contigs:</b> 610<br />
            <b>N50:</b> 84,969,781 bp<br />
            <b>L50:</b> 14<br />
            <b>Largest contig:</b> 183,079,594 bp<br />
            <b>Genome fraction (%):</b> 91.370<br />
        </div>
    </div>

    <!-- K-mer statistics -->
    <div class="collapsible-section">
        <div class="collapsible-header" onclick="toggleSection(this)"><b>K-mer statistics</b></div>
        <div class="collapsible-content">
            <b>Assembly:</b> HG002_1_JAHKSE010000001.1<br />
            <b>K-mer-based compl. (%):</b> 83.12<br />
            <b>K-mer-based cor. length (%):</b> 75.45<br />
            <b>K-mer-based mis. length (%):</b> 24.50<br />
            <b>K-mer-based undef. length (%):</b> 0.05<br />
            <b># k-mer-based misjoins:</b> 3<br />
            &nbsp;&nbsp;&nbsp;&nbsp;<b># translocations:</b> 1<br />
            &nbsp;&nbsp;&nbsp;&nbsp;<b># 100kbp relocations:</b> 2<br />
        </div>
    </div>
</div>

<!-- CSS стили -->
<style>
    .collapsible-header {
        cursor: pointer;
        margin: 10px 0;
        font-size: 16px;
        font-weight: bold;
        color: #333;
    }

    .collapsible-content {
        display: none;
        margin-left: 15px;
        font-size: 13px;
    }

    .collapsible-header.open::before {
        content: "▼ ";
    }

    .collapsible-header::before {
        content: "▶ ";
    }



    #misassemblies_selector_panel {
        display: block;
        margin-top: 10px;
        font-size: 14px;

    }


    #misassemblies_checkboxes_div {
        margin-top: 4px;
    }


    #misassemblies_checkboxes_div label {
        font-size: inherit;
        margin-right: 12px;
        display: inline-flex;
        align-items: center;
    }


    #misassemblies_checkboxes_div input[type="checkbox"] {
        transform: scale(1.2);
        transform-origin: center center;
        margin-right: 6px;
    }
</style>



<script>
    function toggleSection(header) {
        header.classList.toggle("open");
        const content = header.nextElementSibling;
        if (content.style.display === "block") {
            content.style.display = "none";
        } else {
            content.style.display = "block";
        }
    }
</script>

<div id="side_panels_container">

    <div id="legend_panel" class="info_box">
        <div class="legend-title">Legend</div>

        <div class="legend-items">
            <div class="legend-item">
                <svg width="35" height="22" style="vertical-align: middle;">
                    <rect width="35" height="22" class="correct"></rect>
                </svg>
                correct contigs
            </div>

            <div class="legend-item">
                <svg width="35" height="22" style="vertical-align: middle;">
                    <rect width="35" height="22" class="misassembled"></rect>
                </svg>
                misassembled blocks
            </div>

            <div class="legend-item">
                <svg width="35" height="22" style="vertical-align: middle;">
                    <rect width="35" height="22" class="unchecked_misassembly"></rect>
                </svg>
                unchecked
                <small class="legend-note">
                    misassembled blocks (see checkboxes)
                </small>
            </div>

            <div class="legend-item">
                <svg width="35" height="22" style="vertical-align: middle;">
                    <rect width="35" height="22" fill="url(#centromerePattern)"></rect>
                </svg>
                centromere block
            </div>
        </div>
    </div>

</div>








<script>
    function adjustLegend() {
        const stats = document.getElementById('stats_panel');
        const legend = document.getElementById('legend_panel');
        const rect = stats.getBoundingClientRect();
        const newTop = rect.top + stats.offsetHeight + 10;
        legend.style.position = 'fixed';
        legend.style.top = newTop + 'px';
    }

    const oldToggle = window.toggleSection;
    window.toggleSection = function (header) {
        oldToggle(header);
        setTimeout(adjustLegend, 50);
    };

    document.addEventListener('DOMContentLoaded', adjustLegend);
</script>













<!-- Секция с данными (вставляется скриптом) -->
{.section data}
{@}
{.end}

<!-- Скрипты -->
<script type="text/javascript">
    window.onbeforeunload = function () {
        window.scrollTo(0, 0);
    }
</script>

<script type="text/javascript" src="d3.js"></script>
<script type="text/javascript" src="jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="jquery-ui.js"></script>
<script type="text/javascript" src="bootstrap/bootstrap.min.js"></script>
<script type="text/javascript" src="scripts/icarus_interface.js"></script>
<script type="text/javascript" src="scripts/icarus_utils.js"></script>
<script type="text/javascript" src="scripts/display_icarus.js"></script>
<script type="text/javascript" src="scripts/build_icarus.js"></script>



</html>